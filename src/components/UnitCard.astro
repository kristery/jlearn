---
interface Props {
  chapterId: number;
  unitIndex: number;
  id: string;
  title: string;
  type: string;
  estimatedTime: string;
  description: string;
}

const { chapterId, unitIndex, id, title, type, estimatedTime, description } = Astro.props;
const base = import.meta.env.BASE_URL;

const typeConfig: Record<string, { icon: string; label: string; color: string }> = {
  lesson: { icon: 'ğŸ“–', label: 'èª²ç¨‹', color: 'bg-matcha-50 text-matcha-500' },
  culture: { icon: 'ğŸŒ', label: 'æ–‡åŒ–å°æ•™å®¤', color: 'bg-sakura-50 text-sakura-400' },
  practice: { icon: 'âœï¸', label: 'ç¶œåˆç·´ç¿’', color: 'bg-blue-50 text-blue-500' },
  homework: { icon: 'ğŸ“', label: 'ä½œæ¥­', color: 'bg-amber-50 text-amber-600' },
  bonus: { icon: 'ğŸ', label: 'BONUS', color: 'bg-purple-50 text-purple-500' },
};

const config = typeConfig[type] || typeConfig.lesson;
---
<a href={`${base}chapters/${chapterId}/${id}`} class="block card-hover group">
  <div class="bg-white rounded-2xl border border-warm-200/50 p-5 flex items-start gap-4">
    <div class="text-2xl shrink-0 mt-0.5">{config.icon}</div>
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 mb-1">
        <span class={`text-xs px-2 py-0.5 rounded-full font-medium ${config.color}`}>{config.label}</span>
        <span class="text-xs text-ink-lighter">{estimatedTime}</span>
      </div>
      <h3 class="font-semibold text-ink group-hover:text-matcha-500 transition-colors mb-1">
        å–®å…ƒ {unitIndex + 1} â€” {title}
      </h3>
      <p class="text-sm text-ink-lighter">{description}</p>
    </div>
    <svg class="w-5 h-5 text-ink-lighter group-hover:text-matcha-400 group-hover:translate-x-1 transition-all shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
    </svg>
  </div>
</a>
